/*
 * Modul: Titel.
 * Definiert das Layout von Titeln.
 * @author Jakob Metzger <jakob.me@gmail.com>
 * @copyright 2016 Jakob Metzger
 * @license MIT
 */

// Titel
h1, h2, h3 {
    clear: both;
    font-weight: normal;
    color: @color-main;
    padding: 0;
    margin: 0 0 @gap-paragraph 0;
    vertical-align: middle;
    .font-title();

    // Folgend
    p + & { margin-top: (@gap-paragraph * 2); }

    // Kapitelnummer
    &:before {
        box-sizing: border-box;
        display: inline-block;
        color: @color-pale;
        font-weight: normal;
        margin-right: @margin-count-h;
        background: @color-box;
        padding: 0 (@margin-count-h / 2);
        border-radius: @size-radius;
        vertical-align: top;
        .font-main();
    }
}

// Titel Erste Ebene
h1 {
    box-sizing: border-box;
    page-break-before: always;
    font-size: @font-size-h1;
    line-height: @size-count;
    counter-increment: _countH1;
    counter-reset: _countH2 _countH3;
    string-set: _titleH1 content();
    padding-left: (@size-count + @margin-count-h);

    // Intro
    &.intro {
        float: left;
        margin: 0;
        max-width: 65%;
    }

    // Kapitelnummer
    &:before {
        font-style: normal;
        box-sizing: border-box;
        float: left;
        display: block;
        text-align: center;
        font-size: (@font-size-h1 * @factor-count-font);
        content: counter(_countH1);
        color: @color-background;
        margin-left: -(@size-count + @margin-count-h);
        width: @size-count;
        height: @size-count;
        line-height: @size-count;
        background: @color-main;
    }

    // Titel-Nummern
    &[id^="chapter"]:before { content: counter(_countH1, decimal); }
    &[id^="toc"]:before { content: counter(_countH1, upper-alpha); }
}

// Titel Zweite Ebene
h2 {
    font-size: @font-size-h2;
    line-height: (@line-height-small * @font-size-h2);
    padding-left: @margin-title-h;
    counter-reset: _countH3;
    counter-increment: _countH2;

    // Kapitelnummer
    &:before {
        font-size: (@font-size-h2 * @factor-count-font);
        content: counter(_countH1) @delimeter-chapter
                 counter(_countH2);
    }
}

// Titel Dritte Ebene
h3 {
    font-size: @font-size-h3;
    line-height: (@line-height-small * @font-size-h3);
    padding-left: (@margin-title-h * 2);
    counter-increment: _countH3;

    // Kapitelnummer
    &:before {
        font-size: (@font-size-h3 * @factor-count-font);
        content: counter(_countH1) @delimeter-chapter
                 counter(_countH2) @delimeter-chapter
                 counter(_countH3);
    }
}

// Counter-Reset
.reset-h1 { counter-reset: _countH1; }
.reset-h2 { counter-reset: _countH2; }
.reset-h3 { counter-reset: _countH3; }
