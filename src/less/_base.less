/*
 * Modul: Base.
 * Definiert das grundlegende Layout des Dokuments.
 * @author Jakob Metzger <jakob.me@gmail.com>
 * @copyright 2016 Jakob Metzger
 * @license MIT
 */

// Seiten Standard
@page {
    size: A4 portrait;
    margin: @margin-page-v @margin-page-h;
    margin-bottom: @margin-page-h;
}

// Seiten: Inhaltsverzeichnis
.pages-toc {
    page: toc;
    counter-reset: page 1 _countH1 _countToc1 _countToc2 _countToc3;
}

// Seiten: Kapitel
.pages-chapter {
    page: chapter;
    counter-reset: page 1 _countH1 1;
}

// Kapitel-Seiten Rechts: Seitenzahl
@page chapter:right {
    @top-right {
        content: @string-page counter(page);
        .layout-head();
    }
}

// Kapitel-Seiten Links: Kapitelname
@page chapter:left {
    @top-left {
        content: @string-chapter counter(_countH1) @delimeter-title string(_titleH1);
        .layout-head();
    }
}

// Verzeichnis-Seiten Rechts: Seitenzahl
@page toc:right {
    @top-right {
        content: @string-page counter(page, upper-roman);
        .layout-head();
    }
}

// Verzeichnis-Seiten Links: Kapitelname
@page toc:left {
    @top-left {
        content: @string-toc;
        .layout-head();
    }
}

// Fußnoten
cite {
    display: inline;
    float: footnote;
    counter-increment: footnote;
    text-align: left;
    line-height: @line-height-small;
    .text-edge();

    // Linie
    &:before {
        content: "";
        display: block;
        width: 33%;
        height: 0;
        border-top: @size-line solid @color-line;
        margin-bottom: @font-size-edge;
    }

    // Fußnoten-Zahl Inhalt
    &:footnote-call {
        display: inline-block;
        font-style: normal;
        vertical-align: super;
        font-size: (@font-size-edge * @factor-count-font);
        line-height: none;
        padding: (@margin-count-h / 4) (@margin-count-h / 3);
        margin-left: (@margin-count-h / 4);
        background: @color-box;
        border-radius: @size-radius;
    }

    // Aufeinanderfolgende Fußnoten
    & + & {
        margin-top: @font-size-edge;
        &:before { display: none; }
    }
}

// Seiten-Umbruch
.page-break {
    visibility: hidden;
    page-break-after: always;
}

// Abschnitte
.reset-page {
    counter-reset: page 1;
}

// Body
body {
    background: @color-background;
    counter-reset: _countH1 1 _countH2 _countH3 _countFig footnote;
    .font-main();
}
